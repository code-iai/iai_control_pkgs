<launch>

  <param name="/use_sim_time" value="false" />

  <include file="$(find pr2_description)/robots/upload_pr2.launch" />

  <!-- start loopback controller manager --> 
  <node name="loopback_controllers" type="loopback_controller_manager" pkg="loopback_controller_manager" output="screen"> 
    <param name="dt" value="0.002" />
    <param name="damping" value="1.0" />
    <rosparam ns="joints">
      name: ['r_shoulder_lift_joint', 'r_wrist_flex_joint',
             'l_shoulder_pan_joint', 'r_wrist_roll_joint',
             'r_gripper_r_finger_tip_joint', 'l_elbow_flex_joint',
             'r_gripper_l_finger_tip_joint', 'l_forearm_roll_joint',
             'laser_tilt_mount_joint', 'r_shoulder_pan_joint',
             'l_wrist_roll_joint', 'r_gripper_r_finger_joint',
             'r_elbow_flex_joint', 'head_pan_joint',
             'torso_lift_joint', 'r_gripper_joint',
             'l_gripper_joint', 'l_shoulder_lift_joint',
             'r_gripper_l_finger_joint', 'r_forearm_roll_joint',
             'l_gripper_l_finger_tip_joint', 'l_gripper_r_finger_tip_joint',
             'l_gripper_l_finger_joint', 'r_upper_arm_roll_joint',
             'l_upper_arm_roll_joint', 'head_tilt_joint',
             'l_gripper_r_finger_joint', 'l_wrist_flex_joint']

      position: [0.9, -0.66,
                 0.792, 0.0,
                 0.0, -1.2,
                 0.0, 1.0989291102257104,
                 0.66626141400000016, -1.3469981633990615,
                 -0.74078754771647315, 0.0,
                 -1.8, 0.0,
                 0.012, 0.0,
                 0.0, -0.19817694999999991,
                 0.0, -0.0012566370614357503,
                 0.0, 0.0,
                 0.0, -0.077019999999999644,
                 1.1913900000000002, 0.66121278720000021,
                 0.0, -0.20186800000000016]
    </rosparam>
  </node>

  <!-- start joint_states to tf transformer -->
  <node pkg="robot_state_chain_publisher" type="state_chain_publisher" name="robot_state_publisher" output="log" />


<!--  <node name="unspawn_arms"
        pkg="pr2_controller_manager" type="unspawner"
        args="l_arm_controller r_arm_controller" />
-->

  <rosparam command="load" file="$(find ias_mechanism_controllers)/launch/pr2_multi_vel.yaml"/>


  <node name="spawn_vel"
        pkg="pr2_controller_manager" type="spawner"
        args="l_arm_vel r_arm_vel" />

</launch>
